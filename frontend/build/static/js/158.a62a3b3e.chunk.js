"use strict";(self.webpackChunkestore_frontend=self.webpackChunkestore_frontend||[]).push([[158],{1158(e,s,t){t.r(s),t.d(s,{default:()=>V});var a=t(5043),l=t(1228),r=t(5016),i=t(4379),d=t(1990),n=t(1419),c=t(7118),o=t(1680),x=t(4537),m=t(4919),h=t(9493),u=t(579);const p=()=>(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[{label:"Total Sales",value:"$12,450",change:"+12%",color:"from-blue-500 to-blue-600"},{label:"Total Orders",value:"156",change:"+8%",color:"from-purple-500 to-purple-600"},{label:"Total Products",value:"45",change:"+2",color:"from-orange-500 to-orange-600"},{label:"New Users",value:"34",change:"+15%",color:"from-green-500 to-green-600"}].map((e,s)=>(0,u.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-l-transparent hover:shadow-lg transition-shadow relative overflow-hidden",children:[(0,u.jsx)("div",{className:"absolute -right-6 -top-6 w-24 h-24 rounded-full opacity-10 bg-gradient-to-br ".concat(e.color)}),(0,u.jsx)("h3",{className:"text-gray-500 text-sm font-medium uppercase tracking-wider",children:e.label}),(0,u.jsxs)("div",{className:"mt-2 flex items-baseline",children:[(0,u.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:e.value}),(0,u.jsx)("span",{className:"ml-2 text-sm font-medium text-green-600 bg-green-100 px-2 py-0.5 rounded-full",children:e.change})]})]},s))});var g=t(9379),j=t(2339);const b=[{_id:"1",name:"Wireless Headphones",price:199.99,category:"Electronics",stock:45,imageUrl:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=200"},{_id:"2",name:"Smart Watch",price:299.99,category:"Wearables",stock:30,imageUrl:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=200"}],y=()=>{const[e,s]=(0,a.useState)(b),[t,l]=(0,a.useState)(!1),[r,i]=(0,a.useState)(null),[d,n]=(0,a.useState)({name:"",price:"",category:"",stock:"",description:"",imageUrl:""});return(0,u.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,u.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Products Management"}),(0,u.jsx)("button",{onClick:()=>{l(!0),i(null),n({name:"",price:"",category:"",stock:"",description:"",imageUrl:""})},className:"bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90",children:"Add Product"})]}),t?(0,u.jsxs)("div",{className:"bg-gray-50 p-4 rounded mb-6",children:[(0,u.jsx)("h3",{className:"font-semibold mb-4",children:r?"Edit Product":"Add New Product"}),(0,u.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),r)s(e.map(e=>e._id===r._id?(0,g.A)((0,g.A)({},e),d):e)),j.oR.success("Product updated successfully");else{const t=(0,g.A)({_id:Date.now().toString()},d);s([t,...e]),j.oR.success("Product added successfully")}l(!1),i(null),n({name:"",price:"",category:"",stock:"",description:"",imageUrl:""})},className:"space-y-4",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium mb-1",children:"Name"}),(0,u.jsx)("input",{id:"name",type:"text",required:!0,className:"w-full p-2 border rounded",value:d.name,onChange:e=>n((0,g.A)((0,g.A)({},d),{},{name:e.target.value}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium mb-1",children:"Price"}),(0,u.jsx)("input",{id:"price",type:"number",required:!0,className:"w-full p-2 border rounded",value:d.price,onChange:e=>n((0,g.A)((0,g.A)({},d),{},{price:e.target.value}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium mb-1",children:"Category"}),(0,u.jsxs)("select",{id:"category",required:!0,className:"w-full p-2 border rounded",value:d.category,onChange:e=>n((0,g.A)((0,g.A)({},d),{},{category:e.target.value})),children:[(0,u.jsx)("option",{value:"",children:"Select Category"}),(0,u.jsx)("option",{value:"Electronics",children:"Electronics"}),(0,u.jsx)("option",{value:"Wearables",children:"Wearables"}),(0,u.jsx)("option",{value:"Furniture",children:"Furniture"}),(0,u.jsx)("option",{value:"Photography",children:"Photography"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"stock",className:"block text-sm font-medium mb-1",children:"Stock"}),(0,u.jsx)("input",{id:"stock",type:"number",required:!0,className:"w-full p-2 border rounded",value:d.stock,onChange:e=>n((0,g.A)((0,g.A)({},d),{},{stock:e.target.value}))})]}),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("label",{htmlFor:"imageUrl",className:"block text-sm font-medium mb-1",children:"Image URL"}),(0,u.jsx)("input",{id:"imageUrl",type:"url",className:"w-full p-2 border rounded",value:d.imageUrl,onChange:e=>n((0,g.A)((0,g.A)({},d),{},{imageUrl:e.target.value}))})]}),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium mb-1",children:"Description"}),(0,u.jsx)("textarea",{id:"description",className:"w-full p-2 border rounded h-24",value:d.description,onChange:e=>n((0,g.A)((0,g.A)({},d),{},{description:e.target.value}))})]})]}),(0,u.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,u.jsx)("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",className:"bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90",children:"Save Product"})]})]})]}):(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full text-left",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"border-b bg-gray-50 text-gray-600 text-sm",children:[(0,u.jsx)("th",{className:"p-3",children:"Image"}),(0,u.jsx)("th",{className:"p-3",children:"Name"}),(0,u.jsx)("th",{className:"p-3",children:"Category"}),(0,u.jsx)("th",{className:"p-3",children:"Price"}),(0,u.jsx)("th",{className:"p-3",children:"Stock"}),(0,u.jsx)("th",{className:"p-3",children:"Actions"})]})}),(0,u.jsx)("tbody",{children:e.map(t=>(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-3",children:(0,u.jsx)("img",{src:t.imageUrl||"https://via.placeholder.com/40",alt:t.name,className:"w-10 h-10 object-cover rounded"})}),(0,u.jsx)("td",{className:"p-3 font-medium",children:t.name}),(0,u.jsx)("td",{className:"p-3 text-sm bg-blue-100 text-blue-800 w-fit px-2 py-1 rounded-full text-center inline-block my-2",children:t.category}),(0,u.jsxs)("td",{className:"p-3",children:["$",t.price]}),(0,u.jsx)("td",{className:"p-3",children:(0,u.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(t.stock>10?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t.stock})}),(0,u.jsxs)("td",{className:"p-3 space-x-2",children:[(0,u.jsx)("button",{onClick:()=>(e=>{i(e),n({name:e.name,price:e.price,category:e.category,stock:e.stock,description:e.description||"",imageUrl:e.imageUrl||""}),l(!0)})(t),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>{return a=t._id,void(window.confirm("Are you sure you want to delete this product?")&&(s(e.filter(e=>e._id!==a)),j.oR.success("Product deleted successfully")));var a},className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]},t._id))})]})})]})},v=[{id:"ORD-001",customer:"John Doe",email:"john@example.com",date:"2023-10-25",total:129.99,status:"Delivered",items:3},{id:"ORD-002",customer:"Jane Smith",email:"jane@example.com",date:"2023-10-26",total:45.5,status:"Processing",items:1},{id:"ORD-003",customer:"Bob Wilson",email:"bob@example.com",date:"2023-10-27",total:299,status:"Pending",items:2}],N={Pending:"bg-yellow-100 text-yellow-800",Processing:"bg-blue-100 text-blue-800",Shipped:"bg-purple-100 text-purple-800",Delivered:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"},f=()=>{const[e,s]=(0,a.useState)(v),[t,l]=(0,a.useState)(null);return(0,u.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,u.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Orders Management"}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full text-left",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"border-b bg-gray-50 text-gray-600 text-sm",children:[(0,u.jsx)("th",{className:"p-3",children:"Order ID"}),(0,u.jsx)("th",{className:"p-3",children:"Date"}),(0,u.jsx)("th",{className:"p-3",children:"Customer"}),(0,u.jsx)("th",{className:"p-3",children:"Items"}),(0,u.jsx)("th",{className:"p-3",children:"Total"}),(0,u.jsx)("th",{className:"p-3",children:"Status"}),(0,u.jsx)("th",{className:"p-3",children:"Actions"})]})}),(0,u.jsx)("tbody",{children:e.map(t=>(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-3 font-medium",children:t.id}),(0,u.jsx)("td",{className:"p-3 text-sm text-gray-600",children:t.date}),(0,u.jsxs)("td",{className:"p-3",children:[(0,u.jsx)("div",{className:"text-sm font-medium",children:t.customer}),(0,u.jsx)("div",{className:"text-xs text-gray-500",children:t.email})]}),(0,u.jsx)("td",{className:"p-3 text-sm",children:t.items}),(0,u.jsxs)("td",{className:"p-3 font-medium",children:["$",t.total]}),(0,u.jsx)("td",{className:"p-3",children:(0,u.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(N[t.status]||"bg-gray-100"),children:t.status})}),(0,u.jsx)("td",{className:"p-3",children:(0,u.jsxs)("select",{className:"text-sm border rounded p-1",value:t.status,onChange:a=>{return l=t.id,r=a.target.value,s(e.map(e=>e.id===l?(0,g.A)((0,g.A)({},e),{},{status:r}):e)),void j.oR.success("Order ".concat(l," updated to ").concat(r));var l,r},children:[(0,u.jsx)("option",{value:"Pending",children:"Pending"}),(0,u.jsx)("option",{value:"Processing",children:"Processing"}),(0,u.jsx)("option",{value:"Shipped",children:"Shipped"}),(0,u.jsx)("option",{value:"Delivered",children:"Delivered"}),(0,u.jsx)("option",{value:"Cancelled",children:"Cancelled"})]})})]},t.id))})]})})]})},w=[{_id:"1",name:"Admin User",email:"admin@estore.com",role:"admin",joinDate:"2023-01-15"},{_id:"2",name:"John Doe",email:"john@example.com",role:"user",joinDate:"2023-05-20"},{_id:"3",name:"Jane Smith",email:"jane@example.com",role:"user",joinDate:"2023-08-10"}],A=()=>{const[e,s]=(0,a.useState)(w);return(0,u.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,u.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"User Management"}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full text-left",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"border-b bg-gray-50 text-gray-600 text-sm",children:[(0,u.jsx)("th",{className:"p-3",children:"Name"}),(0,u.jsx)("th",{className:"p-3",children:"Email"}),(0,u.jsx)("th",{className:"p-3",children:"Role"}),(0,u.jsx)("th",{className:"p-3",children:"Joined"}),(0,u.jsx)("th",{className:"p-3",children:"Actions"})]})}),(0,u.jsx)("tbody",{children:e.map(t=>(0,u.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"p-3 font-medium",children:t.name}),(0,u.jsx)("td",{className:"p-3 text-sm text-gray-600",children:t.email}),(0,u.jsx)("td",{className:"p-3",children:(0,u.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("admin"===t.role?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:t.role})}),(0,u.jsx)("td",{className:"p-3 text-sm text-gray-500",children:t.joinDate}),(0,u.jsxs)("td",{className:"p-3 space-x-2",children:[(0,u.jsx)("button",{onClick:()=>{return a=t._id,s(e.map(e=>e._id===a?(0,g.A)((0,g.A)({},e),{},{role:"admin"===e.role?"user":"admin"}):e)),void j.oR.success("User role updated");var a},className:"text-primary hover:text-green-700 text-sm underline",children:"admin"===t.role?"Demote":"Promote"}),(0,u.jsx)("button",{onClick:()=>{return a=t._id,void(window.confirm("Are you sure you want to delete this user?")&&(s(e.filter(e=>e._id!==a)),j.oR.success("User deleted")));var a},className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]},t._id))})]})})]})};var S=t(7719),k=t(7856),C=t(9292),D=t(516),P=t(9722);const _=()=>{const[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!0),[r,i]=(0,a.useState)({level:"",search:""}),[d,n]=(0,a.useState)({total:0,info:0,warn:0,error:0}),c=async()=>{try{l(!0);const e=localStorage.getItem("token"),t=new URLSearchParams;r.level&&t.append("level",r.level),r.search&&t.append("search",r.search);const a=await P.A.get("/api/admin/logs?".concat(t.toString()),{headers:{Authorization:"Bearer ".concat(e)}});if(a.data.success){s(a.data.data);const e=a.data.data.reduce((e,s)=>(e.total++,"info"===s.level?e.info++:"warn"===s.level?e.warn++:"error"===s.level&&e.error++,e),{total:0,info:0,warn:0,error:0});n(e)}}catch(e){console.error("Failed to fetch logs",e),j.oR.error("Failed to load logs")}finally{l(!1)}};(0,a.useEffect)(()=>{c();const e=setInterval(c,1e4);return()=>clearInterval(e)},[r]);const o=e=>{switch(e){case"error":return"text-red-600 bg-red-100";case"warn":return"text-yellow-600 bg-yellow-100";case"info":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},x=e=>{switch(e){case"error":case"warn":return(0,u.jsx)(S.A,{size:16});default:return(0,u.jsx)(k.A,{size:16})}};return(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4 w-full md:w-auto",children:[(0,u.jsxs)("div",{className:"relative flex-1 md:w-64",children:[(0,u.jsx)(C.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,u.jsx)("input",{type:"text",placeholder:"Search logs...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",value:r.search,onChange:e=>i((0,g.A)((0,g.A)({},r),{},{search:e.target.value}))})]}),(0,u.jsxs)("select",{className:"border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary",value:r.level,onChange:e=>i((0,g.A)((0,g.A)({},r),{},{level:e.target.value})),children:[(0,u.jsx)("option",{value:"",children:"All Levels"}),(0,u.jsx)("option",{value:"info",children:"Info"}),(0,u.jsx)("option",{value:"warn",children:"Warn"}),(0,u.jsx)("option",{value:"error",children:"Error"})]})]}),(0,u.jsx)("div",{className:"flex items-center space-x-2",children:(0,u.jsx)("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",title:"Refresh",children:(0,u.jsx)(D.A,{size:20,className:t?"animate-spin":""})})})]}),(0,u.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,u.jsx)("thead",{className:"bg-gray-50",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Message"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request ID"})]})}),(0,u.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t&&0===e.length?(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"Loading logs..."})}):0===e.length?(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No logs found"})}):e.map((e,s)=>(0,u.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono",children:new Date(e.timestamp).toLocaleTimeString()}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full items-center gap-1 ".concat(o(e.level)),children:[x(e.level),e.level.toUpperCase()]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.service||"N/A"}),(0,u.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900 font-mono max-w-xs truncate",title:JSON.stringify(e.message||e),children:["string"===typeof e.message?e.message:JSON.stringify(e.message),e.url&&(0,u.jsxs)("span",{className:"text-gray-400 ml-2",children:["(",e.method," ",e.url,")"]})]}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono",children:e.requestId||"-"})]},s))})]})})})]})};var U=t(59),z=t(3005),R=t(5088);const F=()=>{var e,s,t,l,r,i,d,n,c,o,x,m,h,p,g,b,y,v;const[N,f]=(0,a.useState)(null),[w,A]=(0,a.useState)([]),[k,C]=(0,a.useState)(!1),[_,F]=(0,a.useState)(null),I=async()=>{C(!0),F(null);try{const e=localStorage.getItem("token"),s=await P.A.get("/api/admin/monitoring/stats",{headers:{Authorization:"Bearer ".concat(e)}});s.data.success&&f(s.data)}catch(t){var e,s;console.error(t);const a=(null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||t.message||"Failed to fetch stats";F(a),j.oR.error(a)}finally{C(!1)}},O=async()=>{try{const e=localStorage.getItem("token"),s=await P.A.get("/api/admin/monitoring/slow-queries",{headers:{Authorization:"Bearer ".concat(e)}});s.data.success&&A(s.data.data||[])}catch(e){console.error("Failed to fetch slow queries",e)}};return(0,a.useEffect)(()=>{I(),O()},[]),k&&!N?(0,u.jsx)("div",{className:"p-8 text-center",children:"Loading Monitoring Data..."}):_?(0,u.jsxs)("div",{className:"p-8 text-red-500",children:["Error: ",_]}):(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,u.jsx)(U.A,{size:24})," System Health"]}),(0,u.jsxs)("button",{onClick:()=>{I(),O()},className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition",children:[(0,u.jsx)(D.A,{size:18})," Refresh"]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,u.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,u.jsx)("div",{className:"p-3 bg-purple-50 rounded-lg text-purple-600",children:(0,u.jsx)(U.A,{size:24})}),(0,u.jsxs)("span",{className:"text-xs font-bold px-2 py-1 rounded-full ".concat(parseFloat(null===N||void 0===N||null===(e=N.system)||void 0===e||null===(s=e.memory)||void 0===s?void 0:s.percent)>80?"bg-red-100 text-red-600":"bg-green-100 text-green-600"),children:[null===N||void 0===N||null===(t=N.system)||void 0===t||null===(l=t.memory)||void 0===l?void 0:l.percent," Used"]})]}),(0,u.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Memory Usage"}),(0,u.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[null===N||void 0===N||null===(r=N.system)||void 0===r||null===(i=r.memory)||void 0===i?void 0:i.used," / ",null===N||void 0===N||null===(d=N.system)||void 0===d||null===(n=d.memory)||void 0===n?void 0:n.total]})]}),(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,u.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,u.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg text-blue-600",children:(0,u.jsx)(z.A,{size:24})})}),(0,u.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Database Storage"}),(0,u.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:null===N||void 0===N||null===(c=N.database)||void 0===c?void 0:c.storageSize}),(0,u.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[null===N||void 0===N||null===(o=N.database)||void 0===o?void 0:o.objects," Objects"]})]}),(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,u.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,u.jsx)("div",{className:"p-3 bg-green-50 rounded-lg text-green-600",children:(0,u.jsx)(R.A,{size:24})})}),(0,u.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"System Uptime"}),(0,u.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[((null===N||void 0===N||null===(x=N.system)||void 0===x?void 0:x.uptime)/3600).toFixed(1)," Hours"]})]}),(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,u.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,u.jsx)("div",{className:"p-3 bg-yellow-50 rounded-lg text-yellow-600",children:(0,u.jsx)(S.A,{size:24})}),(0,u.jsxs)("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full",children:[null===N||void 0===N||null===(m=N.connections)||void 0===m?void 0:m.active," Active"]})]}),(0,u.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"DB Connections"}),(0,u.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:null===N||void 0===N||null===(h=N.connections)||void 0===h?void 0:h.current})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,u.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,u.jsxs)("h3",{className:"font-bold text-gray-800",children:["Slow Queries (",w.length,")"]})}),(0,u.jsx)("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:(0,u.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,u.jsx)("thead",{className:"text-gray-500 bg-gray-50",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-3 font-medium",children:"Collection"}),(0,u.jsx)("th",{className:"px-6 py-3 font-medium",children:"Operation"}),(0,u.jsx)("th",{className:"px-6 py-3 font-medium",children:"Duration"}),(0,u.jsx)("th",{className:"px-6 py-3 font-medium",children:"Time"})]})}),(0,u.jsx)("tbody",{className:"divide-y divide-gray-100",children:0===w.length?(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No slow queries detected"})}):w.map((e,s)=>(0,u.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.collectionName}),(0,u.jsx)("td",{className:"px-6 py-4",children:e.operation}),(0,u.jsxs)("td",{className:"px-6 py-4 text-red-600 font-bold",children:[e.duration,"ms"]}),(0,u.jsx)("td",{className:"px-6 py-4 text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]},s))})]})})]}),(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,u.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,u.jsx)("h3",{className:"font-bold text-gray-800",children:"Database Details"})}),(0,u.jsxs)("div",{className:"p-6 space-y-4",children:[(0,u.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,u.jsx)("span",{className:"text-gray-600",children:"Database Name"}),(0,u.jsx)("span",{className:"font-medium",children:null===N||void 0===N||null===(p=N.database)||void 0===p?void 0:p.name})]}),(0,u.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,u.jsx)("span",{className:"text-gray-600",children:"Collections"}),(0,u.jsx)("span",{className:"font-medium",children:null===N||void 0===N||null===(g=N.database)||void 0===g?void 0:g.collections})]}),(0,u.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,u.jsx)("span",{className:"text-gray-600",children:"Data Size"}),(0,u.jsx)("span",{className:"font-medium",children:null===N||void 0===N||null===(b=N.database)||void 0===b?void 0:b.dataSize})]}),(0,u.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,u.jsx)("span",{className:"text-gray-600",children:"Index Size"}),(0,u.jsx)("span",{className:"font-medium",children:null===N||void 0===N||null===(y=N.database)||void 0===y?void 0:y.indexSize})]}),(0,u.jsxs)("div",{className:"flex justify-between border-b pb-2",children:[(0,u.jsx)("span",{className:"text-gray-600",children:"Avg Object Size"}),(0,u.jsxs)("span",{className:"font-medium",children:[Math.round(null===N||void 0===N||null===(v=N.database)||void 0===v?void 0:v.avgObjSize)," bytes"]})]})]})]})]})]})};var I=t(5087),O=t(7095),E=t(6376),L=t(7304),q=t(6058);L.t1.register(L.PP,L.kc,L.FN,L.No,L.E8,L.hE,L.m_,L.s$,L.Bs);const T=()=>{const[e,s]=(0,a.useState)(!0),[t,l]=(0,a.useState)(null),[r,i]=(0,a.useState)(null),[d,n]=(0,a.useState)("30d");(0,a.useEffect)(()=>{c()},[d]);const c=async()=>{try{s(!0);const e=localStorage.getItem("token"),t=new Date,a=new Date;"7d"===d&&a.setDate(t.getDate()-7),"30d"===d&&a.setDate(t.getDate()-30),"90d"===d&&a.setDate(t.getDate()-90);const r=await P.A.get("/api/analytics/dashboard?startDate=".concat(a.toISOString(),"&endDate=").concat(t.toISOString()),{headers:{Authorization:"Bearer ".concat(e)}});r.data.success&&l(r.data.data)}catch(e){console.error(e),i("Failed to fetch analytics data")}finally{s(!1)}};if(e)return(0,u.jsx)("div",{className:"p-8 text-center",children:"Loading Analytics..."});if(r)return(0,u.jsxs)("div",{className:"p-8 text-red-500",children:["Error: ",r]});if(!t)return(0,u.jsx)("div",{className:"p-8 text-center",children:"No data available"});const o=t.funnel.view_item>0?(t.funnel.add_to_cart/t.funnel.view_item*100).toFixed(1):0,x=(t.funnel.add_to_cart>0&&(t.funnel.begin_checkout/t.funnel.add_to_cart*100).toFixed(1),t.funnel.begin_checkout>0?(t.funnel.purchase/t.funnel.begin_checkout*100).toFixed(1):0),h=t.uniqueVisitors>0?(t.funnel.purchase/t.uniqueVisitors*100).toFixed(1):0,p={labels:t.dailyActivity.map(e=>e.date),datasets:[{label:"Page Views",data:t.dailyActivity.map(e=>e.views),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",yAxisID:"y"},{label:"Unique Users",data:t.dailyActivity.map(e=>e.uniqueUsers),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",yAxisID:"y1"}]},g={labels:["View Product","Add to Cart","Begin Checkout","Purchase"],datasets:[{label:"Users",data:[t.funnel.view_item,t.funnel.add_to_cart,t.funnel.begin_checkout,t.funnel.purchase],backgroundColor:["rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]};return(0,u.jsxs)("div",{className:"space-y-8",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,u.jsx)(m.A,{className:"text-blue-600"})," User Analytics"]}),(0,u.jsxs)("select",{value:d,onChange:e=>n(e.target.value),className:"bg-white border text-gray-700 py-2 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,u.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,u.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,u.jsx)("option",{value:"90d",children:"Last 90 Days"})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,u.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,u.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg text-blue-600",children:(0,u.jsx)(I.A,{size:24})})}),(0,u.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Unique Visitors"}),(0,u.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:t.uniqueVisitors}),(0,u.jsxs)("p",{className:"text-xs text-green-600 mt-1 flex items-center",children:["Total Views: ",t.totalPageViews]})]}),(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,u.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,u.jsx)("div",{className:"p-3 bg-purple-50 rounded-lg text-purple-600",children:(0,u.jsx)(O.A,{size:24})})}),(0,u.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Add to Cart Rate"}),(0,u.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[o,"%"]}),(0,u.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"View to Cart"})]}),(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,u.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,u.jsx)("div",{className:"p-3 bg-yellow-50 rounded-lg text-yellow-600",children:(0,u.jsx)(E.A,{size:24})})}),(0,u.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Checkout Dropout"}),(0,u.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[100-x,"%"]}),(0,u.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Abandonment Rate"})]}),(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,u.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,u.jsx)("div",{className:"p-3 bg-green-50 rounded-lg text-green-600",children:(0,u.jsx)(m.A,{size:24})})}),(0,u.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Conversion Rate"}),(0,u.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[h,"%"]}),(0,u.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Visitor to Purchase"})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,u.jsx)("h3",{className:"font-bold text-gray-800 mb-6",children:"Conversion Funnel"}),(0,u.jsx)("div",{className:"h-64",children:(0,u.jsx)(q.yP,{data:g,options:{maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]}),(0,u.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,u.jsx)("h3",{className:"font-bold text-gray-800 mb-6",children:"User Activity (Daily)"}),(0,u.jsx)("div",{className:"h-64",children:(0,u.jsx)(q.N1,{data:p,options:{maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{type:"linear",display:!0,position:"left"},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1}}}}})})]})]}),(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,u.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,u.jsx)("h3",{className:"font-bold text-gray-800",children:"Recent Live Events"})}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,u.jsx)("thead",{className:"text-gray-500 bg-gray-50",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-3 font-medium",children:"Time"}),(0,u.jsx)("th",{className:"px-6 py-3 font-medium",children:"Event"}),(0,u.jsx)("th",{className:"px-6 py-3 font-medium",children:"User/Guest"}),(0,u.jsx)("th",{className:"px-6 py-3 font-medium",children:"Details"})]})}),(0,u.jsx)("tbody",{className:"divide-y divide-gray-100",children:t.recentEvents.map((e,s)=>{var t,a;return(0,u.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"px-6 py-4 text-gray-500",children:new Date(e.timestamp).toLocaleString()}),(0,u.jsx)("td",{className:"px-6 py-4",children:(0,u.jsx)("span",{className:"px-2 py-1 rounded text-xs font-bold ".concat("purchase"===e.eventType?"bg-green-100 text-green-700":"add_to_cart"===e.eventType?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.eventType})}),(0,u.jsxs)("td",{className:"px-6 py-4 text-gray-600 font-mono text-xs",children:[e.userId?"User: "+e.userId:"Guest: "+(null===(t=e.guestId)||void 0===t?void 0:t.substr(0,8)),"..."]}),(0,u.jsxs)("td",{className:"px-6 py-4 text-gray-600",children:[e.url," ",null!==(a=e.metadata)&&void 0!==a&&a.productName?"(".concat(e.metadata.productName,")"):""]})]},s)})})]})})]})]})},V=()=>{var e;const{user:s,logout:t}=(0,r.As)(),[g,j]=(0,a.useState)("dashboard"),b=e=>{let{id:s,label:t,icon:a}=e;return(0,u.jsxs)("button",{onClick:()=>j(s),"data-testid":"nav-".concat(s),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ".concat(g===s?"bg-primary text-white shadow-md":"text-gray-600 hover:bg-gray-100"),children:[(0,u.jsx)(a,{size:20}),(0,u.jsx)("span",{className:"font-medium",children:t})]})};return(0,u.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen bg-gray-50 -my-8 -mx-4",children:[(0,u.jsxs)("aside",{className:"w-full md:w-64 bg-white border-r min-h-screen p-6 hidden md:block",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-10 text-primary",children:[(0,u.jsx)(i.A,{size:28}),(0,u.jsx)("span",{className:"text-xl font-bold",children:"Admin Panel"})]}),(0,u.jsxs)("nav",{className:"space-y-2",children:[(0,u.jsx)(b,{id:"dashboard",label:"Dashboard",icon:i.A}),(0,u.jsx)(b,{id:"products",label:"Products",icon:d.A}),(0,u.jsx)(b,{id:"orders",label:"Orders",icon:n.A}),(0,u.jsx)(b,{id:"users",label:"Users",icon:c.A}),(0,u.jsx)(b,{id:"logs",label:"System Logs",icon:o.A}),(0,u.jsx)(b,{id:"monitoring",label:"Monitoring",icon:x.A}),(0,u.jsx)(b,{id:"analytics",label:"Analytics",icon:m.A})]}),(0,u.jsx)("div",{className:"mt-auto pt-10",children:(0,u.jsxs)("button",{onClick:t,className:"flex items-center space-x-3 px-4 py-3 text-red-600 hover:bg-red-50 w-full rounded-lg transition-colors",children:[(0,u.jsx)(h.A,{size:20}),(0,u.jsx)("span",{children:"Logout"})]})})]}),(0,u.jsxs)("div",{className:"md:hidden bg-white p-4 shadow-sm flex overflow-x-auto space-x-4",children:[(0,u.jsx)("button",{onClick:()=>j("dashboard"),className:"p-2 rounded ".concat("dashboard"===g?"bg-primary text-white":"text-gray-600"),children:"Dashboard"}),(0,u.jsx)("button",{onClick:()=>j("products"),className:"p-2 rounded ".concat("products"===g?"bg-primary text-white":"text-gray-600"),children:"Products"}),(0,u.jsx)("button",{onClick:()=>j("orders"),className:"p-2 rounded ".concat("orders"===g?"bg-primary text-white":"text-gray-600"),children:"Orders"}),(0,u.jsx)("button",{onClick:()=>j("users"),className:"p-2 rounded ".concat("users"===g?"bg-primary text-white":"text-gray-600"),children:"Users"}),(0,u.jsx)("button",{onClick:()=>j("logs"),className:"p-2 rounded ".concat("logs"===g?"bg-primary text-white":"text-gray-600"),children:"Logs"}),(0,u.jsx)("button",{onClick:()=>j("monitoring"),className:"p-2 rounded ".concat("monitoring"===g?"bg-primary text-white":"text-gray-600"),children:"Monitor"}),(0,u.jsx)("button",{onClick:()=>j("analytics"),className:"p-2 rounded ".concat("analytics"===g?"bg-primary text-white":"text-gray-600"),children:"Analytics"})]}),(0,u.jsxs)("main",{className:"flex-1 p-8 overflow-y-auto",children:[(0,u.jsxs)("header",{className:"flex justify-between items-center mb-8",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-800 capitalize",children:g}),(0,u.jsxs)("p",{className:"text-gray-500 text-sm",children:["Overview of your store's ",g]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,u.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===s||void 0===s?void 0:s.name)||"Admin User"}),(0,u.jsx)("p",{className:"text-xs text-gray-500",children:(null===s||void 0===s?void 0:s.email)||"admin@estore.com"})]}),(0,u.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-gray-600 font-bold",children:(null===s||void 0===s||null===(e=s.name)||void 0===e?void 0:e[0])||"A"})]})]}),(()=>{switch(g){case"dashboard":return(0,u.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[(0,u.jsx)(p,{}),(0,u.jsxs)("div",{className:"mt-8",children:[(0,u.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Recent Activity"}),(0,u.jsx)(f,{})]})]});case"products":return(0,u.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:(0,u.jsx)(y,{})});case"orders":return(0,u.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:(0,u.jsx)(f,{})});case"users":return(0,u.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:(0,u.jsx)(A,{})});case"logs":return(0,u.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:(0,u.jsx)(_,{})});case"monitoring":return(0,u.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:(0,u.jsx)(F,{})});case"analytics":return(0,u.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:(0,u.jsx)(T,{})});default:return(0,u.jsx)(p,{})}})()]})]})}}}]);
//# sourceMappingURL=158.a62a3b3e.chunk.js.map