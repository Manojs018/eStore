/*! For license information please see 535.895ff55e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkestore_frontend=self.webpackChunkestore_frontend||[]).push([[535],{951(e,t,s){s.d(t,{LK:()=>x,Dj:()=>m,uL:()=>h,mj:()=>u});var a=s(5043),r=s(9379),i=s(3986);const l=["count","wrapper","className","containerClassName","containerTestId","circle","style"],n=a.createContext({}),c=!0;function o(e){let{count:t=1,wrapper:s,className:o,containerClassName:d,containerTestId:m,circle:h=!1,style:x}=e,u=(0,i.A)(e,l);var p,g,y;const b=a.useContext(n),f=(0,r.A)({},u);for(const[a,r]of Object.entries(u))"undefined"===typeof r&&delete f[a];const j=(0,r.A)((0,r.A)((0,r.A)({},b),f),{},{circle:h}),v=(0,r.A)((0,r.A)({},x),function(e){let{baseColor:t,highlightColor:s,width:a,height:r,borderRadius:i,circle:l,direction:n,duration:o,enableAnimation:d=c,customHighlightBackground:m}=e;const h={};return"rtl"===n&&(h["--animation-direction"]="reverse"),"number"===typeof o&&(h["--animation-duration"]="".concat(o,"s")),d||(h["--pseudo-element-display"]="none"),"string"!==typeof a&&"number"!==typeof a||(h.width=a),"string"!==typeof r&&"number"!==typeof r||(h.height=r),"string"!==typeof i&&"number"!==typeof i||(h.borderRadius=i),l&&(h.borderRadius="50%"),"undefined"!==typeof t&&(h["--base-color"]=t),"undefined"!==typeof s&&(h["--highlight-color"]=s),"string"===typeof m&&(h["--custom-highlight-background"]=m),h}(j));let w="react-loading-skeleton";o&&(w+=" ".concat(o));const N=null!==(p=j.inline)&&void 0!==p&&p,k=[],A=Math.ceil(t);for(let i=0;i<A;i++){let e=v;if(A>t&&i===A-1){const s=null!==(g=e.width)&&void 0!==g?g:"100%",a=t%1,i="number"===typeof s?s*a:"calc(".concat(s," * ").concat(a,")");e=(0,r.A)((0,r.A)({},e),{},{width:i})}const s=a.createElement("span",{className:w,style:e,key:i},"\u200c");N?k.push(s):k.push(a.createElement(a.Fragment,{key:i},s,a.createElement("br",null)))}return a.createElement("span",{className:d,"data-testid":m,"aria-live":"polite","aria-busy":null!==(y=j.enableAnimation)&&void 0!==y?y:c},s?k.map((e,t)=>a.createElement(s,{key:t},e)):k)}s(2420);var d=s(579);const m=()=>(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,d.jsx)("div",{className:"h-48",children:(0,d.jsx)(o,{height:"100%"})}),(0,d.jsxs)("div",{className:"p-4",children:[(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsx)(o,{height:24,width:"80%"})}),(0,d.jsx)("div",{className:"mb-3",children:(0,d.jsx)(o,{count:3})}),(0,d.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,d.jsx)(o,{width:80,height:28}),(0,d.jsx)(o,{width:60})]}),(0,d.jsx)(o,{height:40,className:"w-full",borderRadius:6})]})]}),h=()=>(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12",children:[(0,d.jsx)("div",{className:"rounded-lg overflow-hidden h-[400px]",children:(0,d.jsx)(o,{height:"100%"})}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)(o,{height:48,width:"90%"}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)(o,{width:100,height:36}),(0,d.jsx)(o,{width:80})]}),(0,d.jsx)(o,{count:4}),(0,d.jsxs)("div",{className:"rounded-lg p-4 space-y-2",children:[(0,d.jsx)(o,{height:24,width:"40%"}),(0,d.jsx)(o,{width:"60%"}),(0,d.jsx)(o,{width:"50%"})]}),(0,d.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,d.jsx)(o,{height:48,width:"100%",borderRadius:8}),(0,d.jsx)(o,{height:48,width:"100%",borderRadius:8})]})]})]}),x=()=>(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center border-b border-gray-100 pb-4 gap-2",children:[(0,d.jsx)(o,{width:200,height:24}),(0,d.jsx)(o,{width:80,height:28})]}),u=()=>(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-4",children:[(0,d.jsx)(o,{width:"30%",height:24,className:"mb-2"}),(0,d.jsx)(o,{width:"20%"})]})},7535(e,t,s){s.r(t),s.d(t,{default:()=>f});var a=s(5043),r=s(3216),i=s(12),l=s(2224),n=s(951),c=s(9379),o=s(4459),d=s(1212);const m=(0,d.A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),h=(0,d.A)("thumbs-up",[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]]);var x=s(5016),u=s(2339),p=s(579);const g=e=>{let{productId:t,onReviewAdded:s}=e;const[r,i]=(0,a.useState)(0),[l,n]=(0,a.useState)(0),[c,o]=(0,a.useState)(""),[d,h]=(0,a.useState)(!1),{user:g}=(0,x.As)();return(0,p.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),0!==r)if(c.trim())try{h(!0);localStorage.getItem("token");await new Promise(e=>setTimeout(e,800));const e={_id:Date.now().toString(),user:{name:g.name,_id:g._id},rating:r,comment:c,createdAt:(new Date).toISOString(),helpful:[]};s(e),i(0),o("")}catch(t){u.oR.error(t.message)}finally{h(!1)}else u.oR.error("Please write a comment");else u.oR.error("Please select a rating")},className:"bg-gray-50 p-6 rounded-xl border border-gray-100 mb-8",children:[(0,p.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Write a Review"}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),(0,p.jsx)("div",{className:"flex space-x-1",children:[...Array(5)].map((e,t)=>{const s=t+1;return(0,p.jsx)("button",{type:"button",className:"focus:outline-none transition-transform hover:scale-110",onClick:()=>i(s),onMouseEnter:()=>n(s),onMouseLeave:()=>n(0),children:(0,p.jsx)(m,{size:24,fill:s<=(l||r)?"#fbbf24":"none",className:s<=(l||r)?"text-yellow-400":"text-gray-300"})},t)})})]}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Review"}),(0,p.jsx)("textarea",{rows:"4",className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all text-sm",placeholder:"What did you like or dislike about this product?",value:c,onChange:e=>o(e.target.value)})]}),(0,p.jsx)("button",{type:"submit",disabled:d,className:"bg-primary text-white px-6 py-2.5 rounded-lg font-medium hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:d?"Submitting...":"Submit Review"})]})},y=e=>{let{productId:t}=e;const[s,r]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),[n,d]=(0,a.useState)(1),[y,b]=(0,a.useState)(1),{user:f}=(0,x.As)(),j=[{_id:"1",user:{name:"Alice"},rating:5,comment:"Great product! Highly recommended.",createdAt:(new Date).toISOString(),helpful:[]},{_id:"2",user:{name:"Bob"},rating:4,comment:"Good quality but shipping was slow.",createdAt:new Date(Date.now()-864e5).toISOString(),helpful:["123"]}];(0,a.useEffect)(()=>{(async()=>{try{l(!0);const e=await fetch("/api/reviews/".concat(t,"?page=").concat(n,"&limit=5"));if(!e.ok)throw new Error("Failed to fetch");const s=await e.json();r(s.reviews),b(s.totalPages)}catch(e){console.log("Using mock reviews due to:",e),r(j)}finally{l(!1)}})()},[t,n]);return(0,p.jsxs)("div",{className:"mt-12",children:[(0,p.jsx)("h3",{className:"text-2xl font-bold mb-6",children:"Customer Reviews"}),f&&(0,p.jsx)(g,{productId:t,onReviewAdded:e=>{r([e,...s]),u.oR.success("Review added successfully!")}}),(0,p.jsxs)("div",{className:"space-y-6 mt-8",children:[s.map(e=>{var t,a,i;return(0,p.jsxs)("div",{className:"border-b border-gray-100 pb-6 last:border-0",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)("div",{className:"bg-gray-200 p-2 rounded-full",children:(0,p.jsx)(o.A,{size:20,className:"text-gray-500"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"font-semibold text-sm",children:(null===(t=e.user)||void 0===t?void 0:t.name)||"Anonymous"}),(0,p.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,p.jsx)("div",{className:"flex text-yellow-500",children:[...Array(5)].map((t,s)=>(0,p.jsx)(m,{size:16,fill:s<e.rating?"currentColor":"none",className:s<e.rating?"text-yellow-500":"text-gray-300"},s))})]}),(0,p.jsx)("p",{className:"text-gray-600 mb-4 text-sm leading-relaxed",children:e.comment}),(0,p.jsxs)("button",{onClick:()=>(async e=>{if(f){r(s.map(t=>{if(t._id===e){const e=t.helpful.includes(f._id);return(0,c.A)((0,c.A)({},t),{},{helpful:e?t.helpful.filter(e=>e!==f._id):[...t.helpful,f._id]})}return t}));try{const t=localStorage.getItem("token");await fetch("/api/reviews/".concat(e,"/vote"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t)}})}catch(t){u.oR.error("Failed to vote")}}else u.oR.error("Please login to vote")})(e._id),className:"flex items-center space-x-1 text-xs font-medium transition-colors ".concat(f&&null!==(a=e.helpful)&&void 0!==a&&a.includes(f._id)?"text-primary":"text-gray-400 hover:text-gray-600"),children:[(0,p.jsx)(h,{size:14}),(0,p.jsxs)("span",{children:["Helpful (",(null===(i=e.helpful)||void 0===i?void 0:i.length)||0,")"]})]})]},e._id)}),i&&(0,p.jsx)("p",{className:"text-center text-gray-500",children:"Loading reviews..."}),!i&&0===s.length&&(0,p.jsx)("p",{className:"text-center text-gray-500 py-8 italic",children:"No reviews yet. Be the first to write one!"}),y>1&&(0,p.jsx)("div",{className:"flex justify-center space-x-2 mt-6",children:[...Array(y)].map((e,t)=>(0,p.jsx)("button",{onClick:()=>d(t+1),className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(n===t+1?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:t+1},t))})]})]})};var b=s(4505);const f=()=>{const{id:e}=(0,r.g)(),t=(0,r.Zp)(),{addToCart:s}=(0,l._$)(),[c,o]=(0,a.useState)(null),[d,m]=(0,a.useState)(1),[h,x]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{const t=await b.A.get("/products/".concat(e));t.data.success?o(t.data.data):o(null)}catch(t){console.error("Error fetching product:",t),o(null)}finally{x(!1)}})()},[e]);return h?(0,p.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,p.jsx)(n.uL,{})}):c?(0,p.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[(0,p.jsx)("button",{onClick:()=>t("/"),className:"text-primary hover:text-primary-dark mb-4 font-medium",children:"\u2190 Back to Products"}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12",children:[(0,p.jsx)(i.P.div,{whileHover:{scale:1.02},className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,p.jsx)("img",{src:c.imageUrl||c.image||"https://via.placeholder.com/300",alt:c.name,className:"w-full h-auto aspect-square object-cover"})}),(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 leading-tight",children:c.name}),(0,p.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,p.jsxs)("span",{className:"text-2xl md:text-3xl font-bold text-primary",children:["$",c.price]}),(0,p.jsxs)("span",{className:"text-sm text-gray-500",children:["SKU: ",c._id]})]}),(0,p.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed",children:c.description}),(0,p.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,p.jsx)("h3",{className:"font-bold text-gray-900",children:"Product Details"}),(0,p.jsxs)("p",{className:"text-gray-600",children:["Category: ",c.category]}),(0,p.jsxs)("p",{className:"text-gray-600",children:["Stock: ",c.stock," available"]})]}),(0,p.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,p.jsx)("label",{className:"font-bold text-gray-700",children:"Quantity:"}),(0,p.jsxs)("div",{className:"flex items-center space-x-2 border rounded-lg",children:[(0,p.jsx)("button",{onClick:()=>m(Math.max(1,d-1)),className:"px-4 py-2 min-h-[44px] text-gray-600 hover:bg-gray-100 touch-manipulation",children:"\u2212"}),(0,p.jsx)("span",{className:"px-4 py-2 font-bold min-w-[3ch] text-center",children:d}),(0,p.jsx)("button",{onClick:()=>m(d+1),className:"px-4 py-2 min-h-[44px] text-gray-600 hover:bg-gray-100 touch-manipulation",children:"+"})]})]}),(0,p.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{c&&(s(c,d),t("/cart"))},className:"w-full bg-primary text-white font-bold py-3 md:py-4 rounded-lg hover:opacity-90 transition-opacity min-h-[48px] shadow-md",children:"Add to Cart"}),(0,p.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full border-2 border-primary text-primary font-bold py-3 md:py-4 rounded-lg hover:bg-blue-50 transition-colors min-h-[48px]",children:"Buy Now"})]})]})]}),(0,p.jsx)(y,{productId:e})]}):(0,p.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center min-h-screen",children:[(0,p.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Product Not Found"}),(0,p.jsx)("button",{onClick:()=>t("/"),className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-opacity-90",children:"Back to Home"})]})}}}]);
//# sourceMappingURL=535.895ff55e.chunk.js.map